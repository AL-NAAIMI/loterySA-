{% extends "layout.html" %}

{% block content %}
<div class="text-center py-5">
    <h1 class="fw-bold mb-5">Ã‰tat de la Cagnotte</h1>

    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <div class="card border-0 shadow-lg d-inline-block p-5 cagnotte-card text-white">
        <div class="card-body">
            <h5 class="card-title text-uppercase letter-spacing-2 opacity-75">Montant actuel</h5>
            <div class="display-1 fw-bold my-4">
                {{ solde }} <span class="fs-4">ETH</span>
            </div>
            <div class="fs-4 mb-3 opacity-90">
                â‰ˆ {{ "%.2f"|format(solde_eur) }} <span class="fs-5">EUR</span>
            </div>
            <p class="card-text opacity-75 small mb-2">Contrat : {{ contract_address }}</p>
            <p class="card-text opacity-75 small">Prix ETH : {{ "%.2f"|format(eth_price_eur) }} EUR</p>
            <hr class="opacity-25 my-3">
            <p class="card-text small opacity-75 mb-0">
                ğŸ† Le gagnant remportera <strong>90%</strong><br>
                {{ "%.2f"|format(solde * 0.9) }} ETH â‰ˆ <strong>{{ "%.2f"|format(winner_eur) }} EUR</strong><br><br>
                ğŸ¤ L'association recevra <strong>10%</strong><br>
                {{ "%.2f"|format(solde * 0.1) }} ETH â‰ˆ <strong>{{ "%.2f"|format(owner_eur) }} EUR</strong>
            </p>
        </div>
    </div>

    <div class="mt-5">
        <a href="{{ url_for('cagnotte') }}" class="btn btn-outline-primary btn-lg">
            ğŸ”„ RafraÃ®chir la cagnotte
        </a>
    </div>
    
    <div class="mt-3 text-muted small">
        <p>La page se rafraÃ®chit automatiquement toutes les 30 secondes</p>
    </div>
</div>
{% endblock %}